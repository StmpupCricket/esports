<!DOCTYPE html>
<html>
<head>
    <title>Stream Player</title>
    <style>
        body { margin: 0; background-color: #000; }
        iframe { width: 100%; height: 100vh; border: none; }
    </style>
</head>
<body>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const targetId = urlParams.get('id');

    if (!targetId) {
        document.body.innerHTML = "<h2 style='color:white;text-align:center;'>No video ID provided</h2>";
    } else {
        fetch("https://raw.githubusercontent.com/abusaeeidx/CricHd-playlists-Auto-Update-permanent/main/api.json")
            .then(response => {
                if (!response.ok) throw new Error("Network response was not ok");
                return response.json();
            })
            .then(data => {
                const channel = data.find(item => item.id === targetId);
                if (!channel) {
                    document.body.innerHTML = "<h2 style='color:white;text-align:center;'>Stream not found for the provided ID</h2>";
                    return;
                }
                const streamUrl = encodeURIComponent(channel.link);
                const playerUrl = `https://anym3u8player.com/tv/video-player.php?url=${streamUrl}`;
                document.body.innerHTML = `<iframe src="${playerUrl}" allowfullscreen></iframe>`;
            })
            .catch(error => {
                document.body.innerHTML = `<h2 style='color:white;text-align:center;'>Error: ${error.message}</h2>`;
            });
    }
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embed and iFrame Blocker</title>
    <script>
        // Block embeds from esportspk.github.io and allow only esportspk.site
        document.addEventListener('DOMContentLoaded', function() {
            // Check if the page is being framed
            if (window !== window.top) {
                // Check the referrer or parent URL
                try {
                    const parentUrl = window.parent.location.href;
                    const allowedDomain = 'esportspk.site';
                    
                    // If the parent is not from the allowed domain, break out of the frame
                    if (!parentUrl.includes(allowedDomain)) {
                        window.top.location.href = window.location.href;
                    }
                } catch (e) {
                    // This will fail if the parent is from a different origin due to same-origin policy
                    // In that case, we'll break out of the frame
                    window.top.location.href = window.location.href;
                }
            }
            
            // Additional protection against being embedded
            window.onload = function() {
                if (window !== window.top) {
                    try {
                        const parentHost = new URL(window.parent.location.href).hostname;
                        const allowedHost = 'esportspk.site';
                        
                        if (parentHost !== allowedHost) {
                            window.top.location.href = window.location.href;
                        }
                    } catch (e) {
                        window.top.location.href = window.location.href;
                    }
                }
            };
        });
    </script>
    <!-- X-Frame-Options header to prevent embedding on other sites -->
    <meta http-equiv="X-Frame-Options" content="allow-from https://esportspk.site">
</head>
<body>
    <!-- Your website content here -->
    <h1>Welcome to Our Site</h1>
    <p>This content can only be embedded on https://esportspk.site/</p>
    
    <!-- Example of allowed iframe (only from esportspk.site) -->
    <script>
        function loadAllowedIframe() {
            const iframe = document.createElement('iframe');
            iframe.src = 'https://esportspk.site/some-page';
            iframe.style.width = '100%';
            iframe.style.height = '500px';
            document.getElementById('allowed-iframe-container').appendChild(iframe);
        }
    </script>
    <div id="allowed-iframe-container">
        <button onclick="loadAllowedIframe()">Load Allowed iFrame (esportspk.site)</button>
    </div>
</body>
</html>
